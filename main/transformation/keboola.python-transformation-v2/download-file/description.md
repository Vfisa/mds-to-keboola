Please see the original repo with a logic and link:
https://github.com/Stefen-Taime/modern-data-pipeline/blob/main/terraform/app.py
